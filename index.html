<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ikhlas Growers - Pilot Inventory System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
<div class="container py-4">

<h3 class="text-center mb-4">‚ôªÔ∏è Scrap Warehouse Management System (Pilot)</h3>

<!-- ROLE -->
<select id="roleSwitch" class="form-select w-25 mb-3">
  <option value="staff">Staff</option>
  <option value="admin">Admin</option>
</select>

<!-- ADMIN TABS -->
<ul class="nav nav-tabs mb-3 admin-only">
  <li class="nav-item">
    <a class="nav-link active" data-bs-toggle="tab" href="#entry">Stock Entry</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-bs-toggle="tab" href="#items">New Stock Item</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-bs-toggle="tab" href="#clients">New Client</a>
  </li>
</ul>

<div class="tab-content">

<!-- ================= TAB 1: STOCK ENTRY ================= -->
<div class="tab-pane fade show active" id="entry">
  <div class="card mb-4">
    <div class="card-body">
      <h6>Stock Entry</h6>

      <form id="stockForm" class="row g-3">

        <div class="col-md-3">
          <select id="supplierType" class="form-select">
            <option value="">Company / Walk-in</option>
            <option value="company">Company</option>
            <option value="walkin">Walk-in</option>
          </select>
        </div>

        <div class="col-md-3">
          <input id="companyCode" class="form-control" placeholder="Company Code">
        </div>

        <div class="col-md-3">
          <input id="personName" class="form-control" placeholder="Person In-Charge">
        </div>

        <div class="col-md-3">
          <input id="phone" class="form-control" placeholder="Phone">
        </div>

        <div class="col-md-3">
          <input id="sku" class="form-control" placeholder="SKU" required>
        </div>

        <div class="col-md-3">
          <input id="itemName" class="form-control" placeholder="Item Name" readonly>
        </div>

        <div class="col-md-3">
          <select id="category" class="form-select" required>
            <option value="">Select Category</option>
            <option>Scrap Metal</option>
            <option>E-Waste</option>
            <option>Refurbished</option>
          </select>
        </div>

        <div class="col-md-3">
          <input id="weight" type="number" class="form-control" placeholder="Weight (kg)">
        </div>

        <div class="col-md-3">
          <select id="type" class="form-select">
            <option value="IN">IN</option>
            <option value="OUT">OUT</option>
          </select>
        </div>

        <div class="col-md-3">
          <button class="btn btn-primary w-100">Save</button>
        </div>

      </form>
    </div>
  </div>

  <!-- üîΩ ADMIN EXPORT BUTTONS -->
  <div class="mb-3 admin-only">
    <button class="btn btn-outline-success me-2" onclick="exportInventory()">
      Export Inventory
    </button>

    <button class="btn btn-outline-primary me-2" onclick="exportHistory()">
      Export Stock History
    </button>

    <button class="btn btn-outline-dark" onclick="exportClients()">
      Export Clients
    </button>
  </div>

  <!-- INVENTORY -->
  <div class="card mb-4">
    <div class="card-body">
      <h6>Current Inventory</h6>
      <div id="inventoryCards" class="row g-3"></div>
    </div>
  </div>

  <!-- HISTORY -->
  <div class="card">
    <div class="card-body">
      <h6>Stock History</h6>
      <table class="table table-bordered text-center">
        <thead class="table-light">
          <tr>
            <th>SKU</th>
            <th>Item</th>
            <th>Category</th>
            <th>Client</th>
            <th>Type</th>
            <th>Qty</th>
            <th>Date & Time</th>
            <th class="admin-only">Price</th>
            <th class="admin-only">Total</th>
          </tr>
        </thead>
        <tbody id="historyBody"></tbody>
      </table>
    </div>
  </div>
</div>

<!-- ================= TAB 2: NEW STOCK ITEM ================= -->
<div class="tab-pane fade" id="items">
  <div class="card p-3">
    <h6>Create New Stock Item</h6>
    <form id="itemForm" class="row g-3">
      <div class="col-md-3">
        <input id="newSku" class="form-control" placeholder="SKU" required>
      </div>
      <div class="col-md-3">
        <input id="newItemName" class="form-control" placeholder="Item Name" required>
      </div>
      <div class="col-md-3">
        <select id="newCategory" class="form-select" required>
          <option value="">Select Category</option>
          <option>Scrap Metal</option>
          <option>E-Waste</option>
          <option>Refurbished</option>
        </select>
      </div>
      <div class="col-md-3">
        <input id="newPrice" type="number" class="form-control" placeholder="Price / kg" required>
      </div>
      <div class="col-md-3">
        <button class="btn btn-success w-100">Create Item</button>
      </div>
    </form>
  </div>
</div>

<!-- ================= TAB 3: NEW CLIENT ================= -->
<div class="tab-pane fade" id="clients">
  <div class="card p-3 mb-4">
    <h6>Create New Client</h6>
    <form id="clientForm" class="row g-3">

      <div class="col-md-3">
        <select id="clientType" class="form-select">
          <option value="company">Company</option>
          <option value="walkin">Walk-in</option>
        </select>
      </div>

      <div class="col-md-3">
        <input id="clientCode" class="form-control" placeholder="Company Code">
      </div>

      <div class="col-md-3">
        <input id="clientName" class="form-control" placeholder="Company Name">
      </div>

      <div class="col-md-3">
        <input id="clientAddress" class="form-control" placeholder="Address">
      </div>

      <div class="col-md-3">
        <input id="clientPerson" class="form-control" placeholder="Person Name">
      </div>

      <div class="col-md-3">
        <input id="clientPhone" class="form-control" placeholder="Phone">
      </div>

      <div class="col-md-3">
        <button class="btn btn-success w-100">Create Client</button>
      </div>
    </form>
  </div>

  <!-- CLIENT LIST -->
  <div class="card">
    <div class="card-body">
      <h6>Client List</h6>
      <table class="table table-bordered text-center">
        <thead class="table-light">
          <tr>
            <th>Type</th>
            <th>Code</th>
            <th>Name</th>
            <th>Person</th>
            <th>Phone</th>
            <th>Created</th>
            <th class="admin-only">Action</th>
          </tr>
        </thead>
        <tbody id="clientBody"></tbody>
      </table>
    </div>
  </div>
</div>

</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="inventory.js"></script>
</body>
</html>
